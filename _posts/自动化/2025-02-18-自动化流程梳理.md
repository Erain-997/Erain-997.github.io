---
layout:     post
title:      自动化流程梳理
subtitle:   待整理
date:       2025-02-18
author:     Erain
header-img: img/home-bg.jpg
categories: 自动化
catalog: true
tags:
  - ui
---





# 项目现状

- app开发周期
- 需求变更
- 脚本开发周期
- ...

# 自动化目标

最终目标: 自动化工具去代码化, 可以通过入参的方式决定测试什么内容

如:测试A.apk包, 在三星手机上, 测试金币模块的所有用例

结果:共跑了N条用例, 涉及了N个模块, 通过率90%, 其中N个报错

## 目标分解

- 比如优先实现回归测试, 从子场景开始完善
- 框架是否针对单项目, 后期是否扩展
- ...

# 自动化产出

- **对内产出**: xmind测试用例大纲
- **对外产出**: allure结果报告, 以及相应的附件

报告总览:
![](/img/post/自动化/自动化产出1.png)

报错用例:

![](/img/post/自动化/自动化产出2.png)
## 测试报告

- **测试总览:** 运行环境, 总用例条数, 通过结果, 执行时间
- **测试包(android_v1.9.7)**: 系统环境如安卓/ios环境, 业务环境如阿拉伯/美洲(根据实际代码结构划分)
- **测试模块(test_cases)**: 探索模块 / 短视频模块 / 收藏夹 / 个人信息 等子模块
- **测试标签(TestLanguage)**: 按照功能区分, 一个模块可能包含多个标签, 比如金币, 文本等
- **日志收集(logging)**: 用例报错时结合附件log/截图/视频方便定位

# app测试范围覆盖

- 安装卸载
  - 重复安装/启动--优先级高
  - 更新, 上下版本更新
  - 热更
  - 卸载
- 冷/热启动
- 功能--优先级高
- 兼容性
  - 分辨率--优先级高
  - 系统版本
    - 安卓系统
    - ios
  - 模拟器
- 数据采集, 埋点
- 弱网
- 其他异常/安全测试等

# 自动化流程梳理

![](/img/post/自动化/自动化流程梳理.png)

# 自动化服务框架

![](/img/post/自动化/自动化服务框架.png)

## 框架细则

- 持续集成/定时启动

gitci任务构建/每日构建等

- 设备/模块分配
- 打包

代码合并到master后, 或者手动触发, 指定参数打包到某个文件夹下, 测试脚本侧直接读取安装

- 运行环境初始化
  - 运行环境
  - 用例前置:安装,登录等, 公共子行为封装
- 运行脚本
  - 标记好模块/功能标签
  - 日志/截图/录屏相关的文件处理
  - 场景模块化/细化
- 报告推送

hook到飞书群机器人

# CI后要做的

- 每次提交合并时, 触发更新用例: python .\run_mobile_ui_automation_tests.py 1 1 -get_case
- 定时备份用例到本地(前期手工做, 目前每日备份
