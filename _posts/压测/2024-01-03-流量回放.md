---
layout:     post
title:      流量回放demo
subtitle:   思路
date:       2024-01-03
author:     Erain
header-img: img/home-bg.jpg
categories: 压测
catalog: true
tags:
- 压测

---

# 如何从0开始搭建流量回放框架

- 确定需求和目的    
  明确需要搭建什么样的流量回放框架，例如测试不同网络拓扑结构下应用程序的性能、稳定性和安全性    
  需求: 数据准确, 通过性, 性能瓶颈, 回归等

- 选择合适的工具和技术    
  您需要选择合适的流量回放工具和技术，例如Tcpdump、Tshark、Wireshark等捕获和分析网络流量的工具，以及Scapy、Pcap、Hping等处理和发送网络流量的工具。

- 设计框架架构    
  您需要设计流量回放框架的架构，包括如何捕获、过滤、处理和发送网络流量，以及如何进行性能、稳定性和安全性测试。

- 编写代码  
  根据设计的框架架构，您需要编写代码实现流量回放框架的各个功能模块。

- 测试和优化 完成代码编写后，您需要进行测试和优化，确保流量回放框架的性能、稳定性和安全性。

- 部署和维护 在流量回放框架经过测试和优化后，您需要将其部署到实际的测试环境中，并定期进行维护和更新。

# 例子

- mmo游戏性能压测
    - 需求: 验证数据准确度以及性能瓶颈
    - 确认范围:
        - 长期可持续使用, 每次用来回归校验新版本的开发程度
        - 验证稳定版本的性能瓶颈
    - 确定技术栈
        - 服务端:go 客户端: go
        - 压测框架: grpc+goreplay+locust
        - 日志收集+数据处理: es+python
        - 数据持久化: mysql+redis
    - 确认部署环境
        - 数据库, 宿主机, 网关配置, zk版本控制
    - 反馈模式
        - 迭代
  