---
layout:     post 
title:      Kibana-ES简介
subtitle:   Elasticsearch是与名为Logstash的数据收集和日志解析引擎以及名为Kibana的分析和可视化平台一起开发的。
date:       2022-05-23 
author:     Erain 
header-img: img/home-bg.jpg 
categories: 压测 
catalog: true 
tags:
- Kibana
- ES

---

- [官方文档](https://www.elastic.co/cn/what-is/)

# 什么是Kibana

Kibana 是一种数据可视化和挖掘工具, 可以用于日志和时间序列分析、应用程序监控和运营智能使用案例。 它提供了强大且易用的功能, 例如直方图、线形图、饼图、热图和内置的地理空间支持。 此外, 它还提供了与 Elasticsearch
的紧密集成, 这使得 Kibana 成为了可视化 Elasticsearch 中存储数据的默认之选。

- [官网](https://www.elastic.co/cn/kibana/)
- [下载](https://www.elastic.co/cn/downloads/kibana)

# Kibana 的用途是什么？

1. 搜索、查看并可视化 Elasticsearch
   中所索引的数据, 并通过创建柱状图、饼状图、表格、直方图和地图对数据进行分析。仪表板视图能将这些可视化元素集中到一起, 然后通过浏览器加以分享, 以提供有关海量数据的实时分析视图, 为下列用例提供支持: 

- 日志处理和分析
- 基础设施指标和容器监测
- 应用程序性能监测 (APM)
- 地理空间数据分析和可视化
- 安全分析
- 业务分析

2. 借助网络界面来监测和管理 Elastic Stack 实例并确保实例的安全。
3. 针对基于 Elastic Stack 开发的内置解决方案（面向可观测性、安全和企业搜索应用程序）, 将其访问权限集中到一起。

# 什么是ES

Elasticsearch 是一个分布式的免费开源搜索和分析引擎, 适用于包括文本、数字、地理空间、结构化和非结构化数据等在内的所有类型的数据。Elasticsearch 在 Apache Lucene 的基础上开发而成, 由
Elasticsearch N.V.（即现在的 Elastic）于 2010 年首次发布。Elasticsearch 以其简单的 REST 风格 API、分布式特性、速度和可扩展性而闻名, 是 Elastic Stack
的核心组件；Elastic Stack 是一套适用于数据采集、扩充、存储、分析和可视化的免费开源工具。人们通常将 Elastic Stack 称为 ELK Stack（代指 Elasticsearch、Logstash 和
Kibana）, 目前 Elastic Stack 包括一系列丰富的轻量型数据采集代理, 这些代理统称为 Beats, 可用来向 Elasticsearch 发送数据。

Elasticsearch是与名为Logstash的数据收集和日志解析引擎以及名为Kibana的分析和可视化平台一起开发的。这三个产品被设计成一个集成解决方案, 称为“Elastic Stack”（以前称为“ELK stack”）

- [官网](https://www.elastic.co/cn/elasticsearch/)

# ES的应用场景

Elasticsearch 在速度和可扩展性方面都表现出色, 而且还能够索引多种类型的内容, 这意味着其可用于多种用例: 

- 应用程序搜索
- 网站搜索
- 企业搜索
- 日志处理和分析
- 基础设施指标和容器监测
- 应用程序性能监测
- 地理空间数据分析和可视化
- 安全分析
- 业务分析

# Elasticsearch 的工作原理是什么？

原始数据会从多个来源（包括日志、系统指标和网络应用程序）输入到 Elasticsearch 中。数据采集指在 Elasticsearch 中进行索引之前解析、标准化并充实这些原始数据的过程。这些数据在 Elasticsearch
中索引完成之后, 用户便可针对他们的数据运行复杂的查询, 并使用聚合来检索自身数据的复杂汇总。在 Kibana 中, 用户可以基于自己的数据创建强大的可视化, 分享仪表板, 并对 Elastic Stack 进行管理。

# Elasticsearch 索引是什么？

Elasticsearch 索引指相互关联的文档集合。Elasticsearch 会以 JSON
文档的形式存储数据。每个文档都会在一组键（字段或属性的名称）和它们对应的值（字符串、数字、布尔值、日期、数值组、地理位置或其他类型的数据）之间建立联系。

Elasticsearch 使用的是一种名为倒排索引的数据结构, 这一结构的设计可以允许十分快速地进行全文本搜索。倒排索引会列出在所有文档中出现的每个特有词汇, 并且可以找到包含每个词汇的全部文档。

在索引过程中, Elasticsearch 会存储文档并构建倒排索引, 这样用户便可以近实时地对文档数据进行搜索。索引过程是在索引 API 中启动的, 通过此 API 您既可向特定索引中添加 JSON 文档, 也可更改特定索引中的 JSON 文档。

# Logstash 的用途是什么？

Logstash 是 Elastic Stack 的核心产品之一, 可用来对数据进行聚合和处理, 并将数据发送到 Elasticsearch。Logstash 是一个开源的服务器端数据处理管道, 允许您在将数据索引到 Elasticsearch
之前同时从多个来源采集数据, 并对数据进行充实和转换。

# 为何使用 Elasticsearch？

Elasticsearch 很快。由于 Elasticsearch 是在 Lucene 基础上构建而成的, 所以在全文本搜索方面表现十分出色。Elasticsearch
同时还是一个近实时的搜索平台, 这意味着从文档索引操作到文档变为可搜索状态之间的延时很短, 一般只有一秒。因此, Elasticsearch 非常适用于对时间有严苛要求的用例, 例如安全分析和基础设施监测。

Elasticsearch 具有分布式的本质特征。Elasticsearch 中存储的文档分布在不同的容器中, 这些容器称为分片, 可以进行复制以提供数据冗余副本, 以防发生硬件故障。Elasticsearch
的分布式特性使得它可以扩展至数百台（甚至数千台）服务器, 并处理 PB 量级的数据。

Elasticsearch 包含一系列广泛的功能。除了速度、可扩展性和弹性等优势以外, Elasticsearch 还有大量强大的内置功能（例如数据汇总和索引生命周期管理）, 可以方便用户更加高效地存储和搜索数据。

Elastic Stack 简化了数据采集、可视化和报告过程。通过与 Beats 和 Logstash 进行集成, 用户能够在向 Elasticsearch 中索引数据之前轻松地处理数据。同时, Kibana 不仅可针对
Elasticsearch 数据提供实时可视化, 同时还提供 UI 以便用户快速访问应用程序性能监测 (APM)、日志和基础设施指标等数据。

# Elasticsearch主要概念

**集群**: 多台Es服务器的结合的统称叫ES集群, 一个集群包含多台服务器, 多个节点。

**节点**: 一个节点是你集群中的一个服务器, 作为集群的一部分, 它存储你的数据, 参与集群的索引和搜索功能。

**索引**: 一个索引就是一个拥有几分相似特征的文档的集合。比如说, 你可以有一个客户数据的索引, 另一个产品目录的索引, 还有一个订单数据的索引。一个索引由一个名字来标识（必须全部是小写字母的）, 并且当我们要对对应于这个索引中的文档进行索引、搜索、更新和删除的时候, 都要使用到这个名字。

**类型**:  在一个索引中, 你可以定义一种或多种类型。一个类型是你的索引的一个逻辑上的分类/分区, 其语义完全由你来定。

**文档**:  一个文档是一个可被索引的基础信息单元。比如, 你可以拥有某一个客户的文档, 某一个产品的一个文档, 当然, 也可以拥有某个订单的一个文档。文档以JSON（Javascript Object
Notation）格式来表示。文档必须被索引/赋予一个索引的type。

**分片**:  一个索引保存了大量的文档数据, 那这些数据是如何存储的呢？其实这是把很多数据, 分布的放在每个分片中, 分片又被放到集群中的各个机器上。每个分片都独立的“索引”（即可以增加、删除, 修改、查询）。这样做的好处有点两点。
1、横向扩展, 水平分割数据容量。 2、可以在分片上并行的进行操作。

**复制分片**:  一个分片可以有多个复制分片, 也可以无复制分片。它的作用主要是防止分片故障, 加速查询索引等功能, 提供了高可用性。另外, 复制分片是不和主分片在一起的, 意思就是说, 一个主分片在一台机器上, 它的复制分片可能分布在其它N台机器上。
在这里, 我们可以把它理解为, 一个分片的复制, 就叫复制分片。每个分片会包含部分索引文件。文件由sgment组成 。