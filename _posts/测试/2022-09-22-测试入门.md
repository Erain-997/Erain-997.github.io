---
layout:     post
title:      测试概念入门
subtitle:   测试方法、测试流程
date:       2022-09-22
author:     Erain
header-img: img/home-bg.jpg
categories: 测试
catalog: true
tags:
- 测试
---

# 测试方法
## 以测试手段划分
- **白盒测试**     
  主要应用在单元测试阶段, 主要是对代码级的测试, 针对程序内部逻辑结构
- **黑盒测试**     
  不考虑程序的内部逻辑和数据处理, 只需明确输入输出规则, 确保系统或模块实现了业务需求
- **灰盒测试**     
  灰盒测试多用于集成测试阶段, 不仅关注输出、输入的正确性, 同时也关注程序内部的情况     
  常常是通过一些表征性的现象、事件、标志来判断内部的运行状态
- **手动测试**    
  专门的测试人员, 从用户视角对软件的功能、用户体验等进行深度的测试
- **自动化测试**     
  使用测试工具或代码, 实现用例的自动化执行, 以及对预期结果的自动检查, 直接或间接的产生测试报告

## 以测试阶段划分
### 传统瀑布型开发
![](/img/post/传统软件测试V模型.png)

传统的测试模型有一个很明显的特点: 独立开发-->独立测试-->独立修复-->独立验收-->开发完成    
适用群体: 传统信息系统应用的开发, 如: 单片机系统、嵌入式系统等高稳定、使用周期长的系统开发。

1. 单元测试    
   **目的**: 隔绝外部依赖, 纯粹的测试某个模块功能, 对于依赖外部模块的酌情使用mock    
   **关注点**: 单元接口稳定性、功能健壮性、局部数据结构、实现方式     
   **PO思想**: 对功能进行标签分类    
   **测试人员**: 最小粒度由开发自测和测开进行代码测试, 再大点交由QA验证     
2. 集成测试    
   **目的**: 将之前的各个单元组合起来, 外加数据库、日志等中间件进行测试。更好的对单元的真实性、功能进行测试         
   **关注点**: 单元接口稳定性、功能健壮性、模块上下游以及各个模块之间的响应情况  
   **层级思想**: 模块内的集成、子系统内集成、子系统间的集成    
   **测试人员**: 开发自测中会涉及, QA也会涉及, 是对功能验收效率最高的测试      
3. 系统测试    
   **目的**: 全方面的测试, 发现系统与定义/需求/用户行为不一致或是矛盾的地方      
   **关注点**: 功能及相关细节严格按照“需求规则说明书”、“用户使用说明书”、“维修手册”等相关文档实现     
   **测试人员**: 粒度最大, 由QA进行黑盒测试     
   **测试环境**: DEV、SIT、SIM、PROD      
   **用户思维**: 产品的质量不止包括功能质量, 还包括可用性、可持续性、用户体验等      
      - 功能测试: 功能、性能、容错、异常恢复、安全、GUI、兼容性等
      - 非功能测试: 可用性、安全、备用、文档、配置等
4. 验收测试
   **目的**: 交由用户直接验收系统开发情况
   **验收标准**: 明确的功能指标, 使用指标
   **人员**: 用户

### 敏捷开发

敏捷开发的方式用很多, 各个公司不一样但是总体都围绕敏捷来进行: Dev + Ops。其中个人比较喜欢的是微软的 [Introduce the foundation pillars of DevOps: Culture and Lean Product](https://learn.microsoft.com/en-us/training/modules/introduce-foundation-pillars-devops/) 

![](/img/post/微软-devops.png)

在敏捷开发中, 测试和开发的轮廓逐渐不明显, 体现的是一个持续完善产品的思想。上图中的软件开发周期分为6个阶段: 
- 计划（Plan）
- 构建（Build）
- 持续集成（Continuous Integration）
- 部署（Deploy）
- 运维（Operate）
- 持续反馈（Continuous Feedback）

DevOps 是人、过程和产品的结合, 使能持续地向终端用户交付价值, 是一种思想:      
**DevOps = 人 + 过程 + 产品** --> **文化、精益产品、架构 + 技术**

思想转化为能力, 具体表现为: 
- 持续计划（Continuous Planning）
- 持续集成（Continuous Integration）
- 持续发布（Continuous Delivery）
- 持续运维（Continuous Operations）
- 持续质量（Continuous Quality）
- 持续安全（Continuous Security）
- 持续协作（Continuous Collaboration）
- 持续改进（Continuous Improvement）

由此可见, 这种开发方式, 效率高, 对于人员的要求也更高。流程以及职位分工也相应的有所变化。

![](/img/post/敏捷测试流程.png)

#### 角色转化
以前的测试工作者, 是对产品的测量和试验, 现在的测试工作者, 是对产品的质量作保证, 关注点不再是只关注功能和使用, 而是在此基础上, 将产品放眼于整个市场, 并对其持续优化和改善。
- 被动的等待用户需求-->**主动分析市场行为, 自己产生需求影响用户**
- 被动的等待开发提测-->**测试左移, 提前介入, 于是产生了新的岗位: 测试开发、接口测试、自动化测试**
- 被动的等待bug修复-->**主动分析用户行为, 自己优化产品**

#### 内容转化
- 由黑盒测试逐渐转向灰盒甚至是白盒
- 更加关注用户行为
- 工作量和覆盖度都会加大, 需要更流畅的将部分工作转化为自动化
- 更依赖工具的使用, 各种集成, 如云平台、git、日志平台等

## 以测试目的划分
### 冒烟测试
（有趣的知识: 最初的冒烟测试有人说的是用来测试管道的, 往管道内鼓入烟, 看有没有泄露）
- 目的: 为减小测试成本, 在进行系统大规模的测试之前, 先验证一下软件的基本功能是否实现, 是否具备可测性, 避免造成一连串的错误和测试阻塞。（所以也叫验证测试、可测性测试）
- 关注点: 强调对程序的主要功能进行验证

### 回归测试

- 目的: 在详细测试过后, 开发又修改了部分bug, 在版本发布前要再次过一遍主要功能防止bug出现影响范围
- 关注点: 
  - 验证之前版本产生的所有缺陷已全部被修复
  - 确认修复这些缺陷没有引发新的缺陷
  - 当代码上线之后, 测试人员会在生产环境上进行验收测试, 这个验收测试, 有时候也会习惯被称为“验收回归”

### 功能测试

- 说明: 验证产品的功能实现是否符合产品的需求规格
- 关注点: 
  - 功能完整性、设计合理性
  - 功能实现是否满足用户需求和系统设计的隐藏需求
  - 实用性、可持续性

- **测试案例:**
  - 符合 / 不符合规则的账号密码
  - 使用不存在 / 已存在的账号进行注册
  - 验证数据是否落库
  - 使用正确 / 不正确 / 不存在的账号密码进行登录操作
  - 密码错误次数达到限制
  - ...

### 性能测试

- 目的:多用户并发性能测试。以系统设计初期规划的性能指标为预期目标, 对系统不断施加压力, 验证系统在资源可接受范围内, 是否能达到性能预期。
- 关注点: 系统并发、功能并发、数据量大小、用户数多少、相应的配置

### 负载测试

- 目的: 对系统不断地增加并发请求以增加系统压力, 直到系统的某项或多项性能指标达到安全临界值, 如某种资源已经呈饱和状态, 这时继续对系统施加压力, 系统的处理能力不但不能提高, 反而会下降
- 关注点: 数据量大小、用户数多少、能承载的配置

### 压力测试 

- 目的: 超过安全负载的情况下, 对系统继续施加压力, 直到系统崩溃或不能再处理任何请求, 确定在什么负载条件下系统处于失效状态, 以此获得系统最大压力承受能力（系统能提供的最大服务级别）

![](/img/post/性能测试曲线.png)

### 强度测试

- 目的: 强度测试是一种性能测试, 他在系统资源特别低的情况下软件系统运行情况, 目的是找到系统在哪里失效以及如何失效的地方。包括: 
  - Spike testing: 短时间的极端负载测试
  - Extreme testing: 在过量用户下的负载测试
  - Hammer testing: 连续执行所有能做的操作

### 稳定性测试

- 目的: 又叫可靠性测试, 通过给系统加载一定的业务压力, 让系统持续运行一段时间（一般为7x24小时）, 检测系统是否能够稳定运行

### 容量测试

- 目的: 确定系统可处理同时在线的最大用户数
- 关注点: 可支持的最大数据量、用户数

### 契约测试

- 说明: [契约测试](https://zhuanlan.zhihu.com/p/375218489)是专门测试数据结构的综合性测试方法, 在形式上比较类似接口测试
- 关注点: 对于一个返回的消息, 契约测试关注它有多少个字段、每个字段的值是什么类型, 但是一般不会去校验字段的值到底等于多少。所以契约测试一般不需要关注数据, 而是重点关注数据的结构

### 端到端测试

- 目的: 将应用程序与其依赖的系统一起进行测试, 客户端-服务端的最大粒度黑盒测试
- 关注点: 确保在使用网络后, 前后端程序（包括上下游系统）能顺畅交互, 从而保证业务上实现闭环, 确保满足客户的使用需求, 可以帮助发现与系统相关的问题

### 组件测试

- 说明: 组件是指在大型系统中里封装良好的、可独立替换的中间子系统。组件测试能在单元测试和端到端测试之间取得平衡。在微服务架构中, 组件也就是服务本身
- 关注点: 组件本身的功能。往往是通过一定的方法模拟并隔离外部依赖, 避免复杂的部署和配置外部依赖。

### 安全测试

- 说明: [安全测试](https://iknow-pic.cdn.bcebos.com/9345d688d43f8794b151cd76d91b0ef41bd53a3f)指对软件产品的安全缺陷和非法入侵防范能力进行检查和验证

### 配置测试

- 目的: 验证代码的健壮性, 在不同配置下的性能表现
- 例子: 
  - 主从版redis兼容简单, 但是上限低, 集群版上限高, 部分项目后期需要做转换
  - mongo升级
  - 语言升级等

### 探索性测试

- 说明: 测试人员通过测试来不断学习被测系统, 同时把学习到的关于软件系统的更多信息通过综合的整理和分析, 创造出更多的关于测试的主意。强调测试人员的主观能动性, 抛弃繁杂的测试计划和测试用例设计过程, 强调在碰到问题时及时改变测试策略


## 白盒测试方法

- **语句覆盖**: 选择足够多的测试数据, 使被测程序中每个语句至少执行一次。语句覆盖对程序的逻辑覆盖很少。语句覆盖只关心判定表达式的值, 而没有分别测试判定表达式中每个条件取不同值时的情况。语句覆盖是很弱的逻辑覆盖标准。
- **判定覆盖**: 不仅每个语句必须至少执行一次, 而且每个判定的每种可能的结果都应该至少执行一次。
- **条件覆盖**: 不仅每个语句至少执行一次, 而且使判定表达式中的每个条件都取到各种可能的结果。条件覆盖通常比判定覆盖强, 因为它使每个条件都取到了两个不同的结果, 判定覆盖却只关心整个判定表达式的值。但也有反例, 总之, 判定覆盖不一定包含条件覆盖, 条件覆盖也不一定包含判定覆盖。
- **判定/条件覆盖**: 使得判定表达式中的每个条件都取到各种可能的值, 每个判定表达式也都取到各种可能的结果。
- **条件组合覆盖**: 要求选取足够多的测试数据, 使得每个判定表达式中条件的各种可能组合都至少出现一次。条件组合覆盖是前述几种覆盖标准中最强的。满足条件组合覆盖标准的测试数据, 也一定满足判定覆盖、条件覆盖和判定/条件覆盖标准。但是, 条件组合覆盖标准的测试数据并不一定能使程序中的每条路径都执行到, 是从对程序路径的覆盖程度分析的逻辑覆盖标准。
- **点覆盖**: 选取足够多的测试数据, 使得程序执行路径至少经过流图的每个结点一次。由于流图的每个结点与一条或多条语句相对应, 因此点覆盖标准和语句覆盖标准是相同的。
- **边覆盖**: 选取足够多测试数据, 使得程序执行路径至少经过流图中每条边一次。通常边覆盖和判定覆盖是一致的。
- **路径覆盖**: 选取足够多测试数据, 使程序的每条可能路径都至少执行一次(如果程序图中有环, 则要求每个环至少经过一次。